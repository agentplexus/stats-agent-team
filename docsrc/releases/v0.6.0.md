# Release Notes v0.6.0

**Release Date:** January 18, 2026

This release introduces unified configuration loading with agentkit integration, OmniVault secret management support, and AWS CDK deployment infrastructure. The omnillm adapter has been updated for the v0.11.0 Providers API.

## Highlights

- **Agentkit Config Integration** - Unified configuration loading from config.json, environment variables, and OmniVault secrets
- **OmniVault Secret Management** - Secure API key management via AWS Secrets Manager
- **AWS CDK Deployment** - Infrastructure as code for AWS AgentCore deployment
- **OmniLLM v0.11.0** - Updated adapter for the new unified Providers API

## New Features

### Unified Configuration Loading

The configuration system now integrates with agentkit's config package, providing a unified approach to loading settings from multiple sources:

```go
import "github.com/agentplexus/stats-agent-team/pkg/config"

// New recommended way - context-aware loading with OmniVault support
cfg, err := config.Load(ctx)

// Legacy way - still supported for backward compatibility
cfg := config.LoadConfig()
```

**Configuration Sources (in priority order):**

1. Environment variables (highest priority)
2. `config.json` file
3. OmniVault secrets (AWS Secrets Manager, etc.)

### OmniVault Secret Management

API keys and sensitive configuration can now be managed through OmniVault, supporting:

- AWS Secrets Manager
- Environment variables (fallback)
- Local development with `.env` files

**Example config.aws.json:**
```json
{
  "llm": {
    "provider": "gemini",
    "model": "gemini-2.0-flash-exp"
  },
  "secrets": {
    "provider": "aws",
    "region": "us-west-2",
    "secrets": [
      {
        "name": "stats-agent/api-keys",
        "mapping": {
          "gemini_api_key": "GEMINI_API_KEY",
          "serper_api_key": "SERPER_API_KEY"
        }
      }
    ]
  }
}
```

### AWS CDK Deployment

New `cdk/` directory provides AWS CDK infrastructure for deploying to AWS AgentCore:

```bash
cd cdk
cp config.example.json config.json
# Edit config.json with your settings
cdk deploy
```

**Features:**

- ECS Fargate deployment
- Auto-scaling configuration
- VPC and security group setup
- Secrets Manager integration

See [AWS AgentCore Guide](../guides/aws-agentcore.md) for detailed deployment instructions.

## Enhancements

### OmniLLM Adapter Update

Updated the OmniLLM adapter to use the new v0.11.0 Providers API:

```go
// Before (v0.10.x)
config := omnillm.ClientConfig{
    Provider: omnillm.ProviderNameGemini,
    APIKey:   apiKey,
}

// After (v0.11.0)
config := omnillm.ClientConfig{
    Providers: []omnillm.ProviderConfig{
        {
            Provider: omnillm.ProviderNameGemini,
            APIKey:   apiKey,
        },
    },
}
```

This change enables future support for fallback providers and circuit breaker patterns.

### CI/CD Improvements

- Added `build_maintenance` flag for patch release Docker images
- Improved release workflow for maintenance builds

## Dependencies

### Updated Dependencies

| Package | Old Version | New Version |
|---------|-------------|-------------|
| `github.com/agentplexus/omnillm` | v0.10.0 | v0.11.0 |
| `github.com/agentplexus/agentkit` | v0.2.0 | v0.3.0 |
| `github.com/agentplexus/go-opik` | v0.5.0 | v0.5.1 |
| `github.com/agentplexus/go-phoenix` | v0.1.0 | v0.1.1 |
| `github.com/agentplexus/omnivault` | v0.1.0 | v0.2.0 |
| `github.com/cloudwego/eino` | v0.7.17 | v0.7.21 |
| `github.com/danielgtaylor/huma/v2` | v2.34.1 | v2.35.0 |
| `github.com/go-chi/chi/v5` | v5.2.3 | v5.2.4 |
| `github.com/a2aproject/a2a-go` | v0.3.3 | v0.3.4 |
| `github.com/grokify/mogo` | v0.72.5 | v0.72.6 |
| `google.golang.org/genai` | v1.40.0 | v1.42.0 |

## Configuration Reference

### New Configuration Files

| File | Purpose |
|------|---------|
| `config.json` | Local development configuration |
| `config.aws.json` | AWS deployment with Secrets Manager |
| `cdk/config.example.json` | CDK deployment template |

### Config Structure

```json
{
  "llm": {
    "provider": "gemini",
    "model": "gemini-2.0-flash-exp"
  },
  "search": {
    "provider": "serper"
  },
  "observability": {
    "enabled": true,
    "provider": "opik",
    "project": "stats-agent-team"
  },
  "agents": {
    "research": { "url": "http://localhost:8001" },
    "synthesis": { "url": "http://localhost:8004" },
    "verification": { "url": "http://localhost:8002" },
    "orchestrator": { "url": "http://localhost:8000" }
  }
}
```

## Migration Guide

### From v0.5.x

1. Update dependencies:
   ```bash
   go get github.com/agentplexus/stats-agent-team@v0.6.0
   go mod tidy
   ```

2. (Optional) Create a `config.json` for unified configuration:
   ```json
   {
     "llm": {
       "provider": "gemini",
       "model": "gemini-2.0-flash-exp"
     }
   }
   ```

3. (Optional) Migrate to context-aware config loading:
   ```go
   // Old way (still works)
   cfg := config.LoadConfig()

   // New way (recommended)
   cfg, err := config.Load(ctx)
   ```

### Backward Compatibility

- `LoadConfig()` continues to work and will fall back to environment-only loading if `config.json` is not present
- All existing environment variables are still supported
- No breaking changes to the public API

## Contributors

- John Wang (@grokify)

---

**Full Changelog:** [`v0.5.1...v0.6.0`](https://github.com/agentplexus/stats-agent-team/compare/v0.5.1...v0.6.0)
